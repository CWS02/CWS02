@{
    Layout = "~/Views/Shared/_LayoutMember2.cshtml";
    ViewBag.Title = "數據統計";
}

<head>
    <link rel="stylesheet" href="~/css/style2.css" />
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"></script>
</head>

<div id="app" class="container" style="margin-top: 50px;">
    <h2 class="text-center">數據統計</h2>

    <form method="get" action="@Url.Action("SGS_Calculate", "Home")" class="form-inline justify-content-center mb-4">
        <div class="form-group mr-3">
            <label for="category" class="mr-3">選擇類別:</label>
            <select v-model="category" name="category" class="form-control">
                <option value="">請選擇</option>
                <option value="electricity">電費</option>
                <option value="water">水費</option>
                <option value="waste">廢棄物</option>
            </select>
        </div>

        <!-- 電費 -->
        <div v-if="category === 'electricity'" class="form-group mr-3">
            <label for="startdate" class="mr-3">開始日期:</label>
            <input type="date" name="startdate" class="form-control" v-model="startdate" />
            <label for="enddate" class="mr-3">結束日期:</label>
            <input type="date" name="enddate" class="form-control" v-model="enddate" />
            <label for="factory" class="mr-3">選擇廠區:</label>
            <select name="factory" class="form-control" v-model="factory">
                <option>請選擇</option>
                <option value="1">南科廠</option>
                <option value="2">樹谷廠</option>
            </select>
        </div>

        <!-- 水費 -->
        <div v-if="category === 'water'" class="form-group mr-3">
            <label for="startdate" class="mr-3">開始日期:</label>
            <input type="date" name="startdate" class="form-control" v-model="startdate" />
            <label for="enddate" class="mr-3">結束日期:</label>
            <input type="date" name="enddate" class="form-control" v-model="enddate" />
            <label for="factory" class="mr-3">選擇廠區:</label>
            <select name="factory" class="form-control" v-model="factory">
                <option>請選擇</option>
                <option value="南科廠">南科廠</option>
                <option value="樹谷一期">樹谷一期</option>
                <option value="樹谷二期">樹谷二期</option>
            </select>
            <label for="waterdiameter" class="mr-3">水表口徑:</label>
            <select name="waterdiameter" class="form-control" v-model="waterdiameter">
                <option>請選擇</option>
                <option value="40">40</option>
                <option value="75">75</option>
                <option value="100">100</option>
            </select>
        </div>

        <!-- 廢棄物 -->
        <div v-if="category === 'waste'" class="form-group mr-3">
            <label for="startdate" class="mr-3">開始日期:</label>
            <input type="date" name="startdate" class="form-control" v-model="startdate" />
            <label for="enddate" class="mr-3">結束日期:</label>
            <input type="date" name="enddate" class="form-control" v-model="enddate" />
            <label for="methods" class="mr-3">處理方式:</label>
            <select name="methods" class="form-control">
                <option>請選擇</option>
                <option value="掩埋">掩埋</option>
                <option value="焚化處理">焚化處理</option>
            </select>
            <label for="code" class="mr-3">廢棄物代碼:</label>
            <select name="code" class="form-control">
                <option>請選擇</option>
                <option value="D-1801">D-1801</option>
                <option value="D-2399">D-2399</option>
                <option value="D-2406">D-2406</option>
                <option value="D-2499">D-2499</option>
            </select>
        </div>

        <div class="form-group">
            <button class="btn btn-primary btn-spacing" type="submit">搜索</button>
        </div>
    </form>
</div>

<br />

<!--table-->
@*<div class="card">
        <div class="card-body">
            <div class="table-responsive" style="overflow-x: auto;">
                <table class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>序</th>
                            <th>類別</th>
                            <th>項目</th>
                            <th>總電量</th>
                            <th>填充量(公斤)</th>
                            <th>係數</th>
                            <th>單位</th>
                            <th>公告年份</th>
                            <th>計算結果</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>*@
<script>
    new Vue({
        el: '#app', 
        data: {
            category: '',
            startdate: '',
            enddate: '',
            factory: '',
            waterdiameter: '',
            method: '',
            code: ''
        },
        mounted() {
            const urlParams = new URLSearchParams(window.location.search);
            this.category = urlParams.get('category') || '';
            this.startdate = urlParams.get('startdate') || '';
            this.enddate = urlParams.get('enddate') || '';
            this.factory = urlParams.get('factory') || '';
            this.waterdiameter = urlParams.get('waterdiameter') || '';
            this.methods = urlParams.get('methods') || '';
            this.code = urlParams.get('code') || '';
        }
    });
</script>
